<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Evaluates the power of an experimental design, for normal response variables,
given the design's run matrix and the statistical model to be fit to the data.
Returns a data frame of parameter and effect powers. Designs can
consist of both continuous and categorical factors. By default, eval_design
assumes a signal-to-noise ratio of 2, but this can be changed with the
effectsize or anticoef parameters."><title>Calculate Power of an Experimental Design — eval_design • skpr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Power of an Experimental Design — eval_design"><meta property="og:description" content="Evaluates the power of an experimental design, for normal response variables,
given the design's run matrix and the statistical model to be fit to the data.
Returns a data frame of parameter and effect powers. Designs can
consist of both continuous and categorical factors. By default, eval_design
assumes a signal-to-noise ratio of 2, but this can be changed with the
effectsize or anticoef parameters."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">skpr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tylermorganwall/skpr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate Power of an Experimental Design</h1>
      <small class="dont-index">Source: <a href="https://github.com/tylermorganwall/skpr/blob/HEAD/R/eval_design.R" class="external-link"><code>R/eval_design.R</code></a></small>
      <div class="d-none name"><code>eval_design.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Evaluates the power of an experimental design, for normal response variables,
given the design's run matrix and the statistical model to be fit to the data.
Returns a data frame of parameter and effect powers. Designs can
consist of both continuous and categorical factors. By default, <code>eval_design</code>
assumes a signal-to-noise ratio of 2, but this can be changed with the
<code>effectsize</code> or <code>anticoef</code> parameters.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">eval_design</span><span class="op">(</span></span>
<span>  <span class="va">design</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  blocking <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  anticoef <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  effectsize <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  varianceratios <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contrasts <span class="op">=</span> <span class="va">contr.sum</span>,</span>
<span>  conservative <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reorder_factors <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  detailedoutput <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  advancedoptions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>design</dt>
<dd><p>The experimental design. Internally, <code>eval_design</code> rescales each numeric column
to the range [-1, 1], so you do not need to do this scaling manually.</p></dd>


<dt>model</dt>
<dd><p>The model used in evaluating the design. If this is missing and the design
was generated with skpr, the generating model will be used. It can be a subset of the model used to
generate the design, or include higher order effects not in the original design generation. It cannot include
factors that are not present in the experimental design.</p></dd>


<dt>alpha</dt>
<dd><p>Default `0.05`. The specified type-I error.</p></dd>


<dt>blocking</dt>
<dd><p>Default `NULL`. If `TRUE`, <code>eval_design</code> will look at the rownames (or blocking columns) to determine blocking structure. Default FALSE.</p></dd>


<dt>anticoef</dt>
<dd><p>The anticipated coefficients for calculating the power. If missing, coefficients
will be automatically generated based on the <code>effectsize</code> argument.</p></dd>


<dt>effectsize</dt>
<dd><p>Default `2`. The signal-to-noise ratio. For continuous factors, this specifies the
difference in response between the highest and lowest levels of the factor (which are -1 and +1 after <code>eval_design</code>
normalizes the input data), assuming that the root mean square error is 1. If you do not specify <code>anticoef</code>,
the anticipated coefficients will be half of <code>effectsize</code>. If you do specify <code>anticoef</code>, <code>effectsize</code> will be ignored.</p></dd>


<dt>varianceratios</dt>
<dd><p>Default `NULL`. The ratio of the whole plot variance to the run-to-run variance.
If not specified during design generation, this will default to 1. For designs with more than one subplot
this ratio can be a vector specifying the variance ratio for each subplot (comparing to the run-to-run variance).
Otherwise, it will use a single value for all strata.</p></dd>


<dt>contrasts</dt>
<dd><p>Default <code>contr.sum</code>. The function to use to encode the categorical factors in the model matrix. If the user has specified their own contrasts
for a categorical factor using the contrasts function, those will be used. Otherwise, skpr will use `contr.sum`.</p></dd>


<dt>conservative</dt>
<dd><p>Specifies whether default method for generating
anticipated coefficents should be conservative or not. `TRUE` will give the most conservative
estimate of power by setting all but one (or multiple if they are equally low) level in each categorical factor's anticipated coefficients
to zero. Default `FALSE`.</p></dd>


<dt>reorder_factors</dt>
<dd><p>Default `FALSE`. If `TRUE`, the levels will be reordered to generate the most conservative calculation of effect power.
The function searches through all possible reference levels for a given factor and chooses the one that results in the lowest effect power.
The reordering will be presenting in the output when `detailedoutput = TRUE`.</p></dd>


<dt>detailedoutput</dt>
<dd><p>If `TRUE``, return additional information about evaluation in results. Default FALSE.</p></dd>


<dt>advancedoptions</dt>
<dd><p>Default `NULL`. A named list with parameters to specify additional attributes to calculate. Options: `aliaspower`
gives the degree at which the Alias matrix should be calculated.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with the parameters of the model, the type of power analysis, and the power. Several
design diagnostics are stored as attributes of the data frame. In particular,
the <code>modelmatrix</code> attribute contains the model matrix that was used for power evaluation. This is
especially useful if you want to specify the anticipated coefficients to use for power evaluation. The model
matrix provides the order of the model coefficients, as well as the
encoding used for categorical factors.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function evaluates the power of experimental designs.</p>
<p>If the design is has no blocking or restrictions on randomization, the model assumed is:</p>
<p>\(y = X \beta + \epsilon\).</p>
<p>If the design is a split-plot design, the model is as follows:</p>
<p>\(y = X \beta + Z b\)<sub>i</sub> + \(\epsilon\)<sub>ij</sub>,</p>
<p>Here, \(y\) is the vector of experimental responses, \(X\) is the model matrix, \(\beta\) is
the vector of model coefficients, \(Z_{i}\) are the blocking indicator,
\(b_{i}\) is the random variable associated with the \(i\)th block, and \(\epsilon\)
is a random variable normally distributed with zero mean and unit variance (root-mean-square error is 1.0).</p>
<p><code>eval_design</code> calculates both parameter power as well as effect power, defined as follows:</p>
<p>1) Parameter power is the probability of rejecting the hypothesis \(H_0 : \beta_i = 0\), where \(\beta_i\) is a single parameter
in the model
2) Effect power is the probability of rejecting the hypothesis \(H_0 : \beta_{1} = \beta_{2} = ... = \beta_{n} 0\) for all \(n\) coefficients
for a categorical factor.</p>
<p>The two power types are equivalent for continuous factors and two-level categorical factors,
but they will differ for categorical factors with three or more levels.</p>
<p>For split-plot designs, the degrees of freedom are allocated to each term according to the algorithm
given in "Mixed-Effects Models in S and S-PLUS" (Pinheiro and Bates, pp. 91).</p>
<p>When using <code>conservative = TRUE</code>, <code>eval_design</code> first evaluates the power with the default (or given) coefficients. Then,
for each multi-level categorical, it sets all coefficients to zero except the level that produced the lowest power,
and then re-evaluates the power with this modified set of anticipated coefficients. If there are two or more
equal power values in a multi-level categorical, two of the lowest equal terms are given opposite sign anticipated coefficients
and the rest (for that categorical factor) are set to zero.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Generating a simple 2x3 factorial to feed into our optimal design generation</span></span></span>
<span class="r-in"><span><span class="co">#of an 11-run design.</span></span></span>
<span class="r-in"><span><span class="va">factorial</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, B <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, C <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">optdesign</span> <span class="op">=</span> <span class="fu"><a href="gen_design.html">gen_design</a></span><span class="op">(</span>candidateset <span class="op">=</span> <span class="va">factorial</span>,</span></span>
<span class="r-in"><span>                      model<span class="op">=</span> <span class="op">~</span><span class="va">A</span> <span class="op">+</span> <span class="va">B</span> <span class="op">+</span> <span class="va">C</span>, trials <span class="op">=</span> <span class="fl">11</span>, optimality <span class="op">=</span> <span class="st">"D"</span>, repeats <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Now evaluating that design (with default anticipated coefficients and a effectsize of 2):</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span>design <span class="op">=</span> <span class="va">optdesign</span>, model<span class="op">=</span> <span class="op">~</span><span class="va">A</span> <span class="op">+</span> <span class="va">B</span> <span class="op">+</span> <span class="va">C</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 (Intercept)    effect.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           A    effect.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           B    effect.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           C    effect.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 (Intercept) parameter.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           A parameter.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           B parameter.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           C parameter.power 0.9622638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.2 <span style="font-weight: bold;">• Trials = </span>11 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~A + B + C </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Evaluating a subset of the design (which changes the power due to a different number of</span></span></span>
<span class="r-in"><span><span class="co">#degrees of freedom)</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span>design <span class="op">=</span> <span class="va">optdesign</span>, model<span class="op">=</span> <span class="op">~</span><span class="va">A</span> <span class="op">+</span> <span class="va">C</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 (Intercept)    effect.power 0.9659328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           A    effect.power 0.9659328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           C    effect.power 0.9659328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 (Intercept) parameter.power 0.9659328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           A parameter.power 0.9659328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           C parameter.power 0.9659328</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.2 <span style="font-weight: bold;">• Trials = </span>11 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~A + C </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#We do not have to input the model if it's the same as the model used</span></span></span>
<span class="r-in"><span><span class="co">#During design generation. Here, we also use the default value for alpha (`0.05`)</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">optdesign</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 (Intercept)    effect.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           A    effect.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           B    effect.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           C    effect.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 (Intercept) parameter.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           A parameter.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           B parameter.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           C parameter.power 0.7991116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.05 <span style="font-weight: bold;">• Trials = </span>11 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~A + B + C </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Halving the signal-to-noise ratio by setting a different effectsize (default is 2):</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span>design <span class="op">=</span> <span class="va">optdesign</span>, model<span class="op">=</span> <span class="op">~</span><span class="va">A</span> <span class="op">+</span> <span class="va">B</span> <span class="op">+</span> <span class="va">C</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, effectsize <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 (Intercept)    effect.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           A    effect.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           B    effect.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           C    effect.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 (Intercept) parameter.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           A parameter.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           B parameter.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           C parameter.power 0.6021367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.2 <span style="font-weight: bold;">• Trials = </span>11 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~A + B + C </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(0.500, 0.500, 0.500, 0.500) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#With 3+ level categorical factors, the choice of anticipated coefficients directly changes the</span></span></span>
<span class="r-in"><span><span class="co">#final power calculation. For the most conservative power calculation, that involves</span></span></span>
<span class="r-in"><span><span class="co">#setting all anticipated coefficients in a factor to zero except for one. We can specify this</span></span></span>
<span class="r-in"><span><span class="co">#option with the "conservative" argument.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">factorialcoffee</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kona"</span>, <span class="st">"Colombian"</span>, <span class="st">"Ethiopian"</span>, <span class="st">"Sumatra"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Short"</span>, <span class="st">"Grande"</span>, <span class="st">"Venti"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">designcoffee</span> <span class="op">=</span> <span class="fu"><a href="gen_design.html">gen_design</a></span><span class="op">(</span><span class="va">factorialcoffee</span>,</span></span>
<span class="r-in"><span>                         <span class="op">~</span><span class="va">cost</span> <span class="op">+</span> <span class="va">size</span> <span class="op">+</span> <span class="va">type</span>, trials <span class="op">=</span> <span class="fl">29</span>, optimality <span class="op">=</span> <span class="st">"D"</span>, repeats <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Evaluate the design, with default anticipated coefficients (conservative is FALSE by default).</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">designcoffee</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.9990689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         cost    effect.power 0.9991530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         size    effect.power 0.9522717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         type    effect.power 0.9907584</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  (Intercept) parameter.power 0.9990689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         cost parameter.power 0.9991530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        size1 parameter.power 0.9443775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        size2 parameter.power 0.9443775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        type1 parameter.power 0.8339422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       type2 parameter.power 0.8339422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type3 parameter.power 0.8339422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.05 <span style="font-weight: bold;">• Trials = </span>29 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~cost + size + type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, -1, 1, -1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Evaluate the design, with conservative anticipated coefficients:</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">designcoffee</span>, conservative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.9990689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         cost    effect.power 0.9991530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         size    effect.power 0.9522717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         type    effect.power 0.8300151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  (Intercept) parameter.power 0.9990689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         cost parameter.power 0.9991530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        size1 parameter.power 0.0500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        size2 parameter.power 0.9443775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        type1 parameter.power 0.0500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       type2 parameter.power 0.8339422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type3 parameter.power 0.8339422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.05 <span style="font-weight: bold;">• Trials = </span>29 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~cost + size + type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 0, 1, 0, 1, -1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#which is the same as the following, but now explicitly entering the coefficients:</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">designcoffee</span>, anticoef <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.9990689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         cost    effect.power 0.9991530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         size    effect.power 0.9654778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         type    effect.power 0.8478953</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  (Intercept) parameter.power 0.9990689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         cost parameter.power 0.9991530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        size1 parameter.power 0.9443775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        size2 parameter.power 0.0500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        type1 parameter.power 0.0500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       type2 parameter.power 0.8339422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type3 parameter.power 0.0500000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.05 <span style="font-weight: bold;">• Trials = </span>29 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~cost + size + type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, 0, 0, 1, 0) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#You can also evaluate the design with higher order effects, even if they were not</span></span></span>
<span class="r-in"><span><span class="co">#used in design generation:</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">designcoffee</span>, model <span class="op">=</span> <span class="op">~</span><span class="va">cost</span> <span class="op">+</span> <span class="va">size</span> <span class="op">+</span> <span class="va">type</span> <span class="op">+</span> <span class="va">cost</span> <span class="op">*</span> <span class="va">type</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.9989226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         cost    effect.power 0.9989944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         size    effect.power 0.9476843</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         type    effect.power 0.9879203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    cost:type    effect.power 0.9859502</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  (Intercept) parameter.power 0.9989226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         cost parameter.power 0.9989944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        size1 parameter.power 0.9361224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        size2 parameter.power 0.9361224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       type1 parameter.power 0.8215540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type2 parameter.power 0.8215540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       type3 parameter.power 0.8215540</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  cost:type1 parameter.power 0.8185524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  cost:type2 parameter.power 0.8185524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  cost:type3 parameter.power 0.8185524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.05 <span style="font-weight: bold;">• Trials = </span>29 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~cost + size + type + cost:type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, -1, 1, -1, 1, 1, -1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Generating and evaluating a split plot design:</span></span></span>
<span class="r-in"><span><span class="va">splitfactorialcoffee</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>caffeine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kona"</span>, <span class="st">"Colombian"</span>, <span class="st">"Ethiopian"</span>, <span class="st">"Sumatra"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Short"</span>, <span class="st">"Grande"</span>, <span class="st">"Venti"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">coffeeblockdesign</span> <span class="op">=</span> <span class="fu"><a href="gen_design.html">gen_design</a></span><span class="op">(</span><span class="va">splitfactorialcoffee</span>, <span class="op">~</span><span class="va">caffeine</span>, trials <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">coffeefinaldesign</span> <span class="op">=</span> <span class="fu"><a href="gen_design.html">gen_design</a></span><span class="op">(</span><span class="va">splitfactorialcoffee</span>,</span></span>
<span class="r-in"><span>                              model <span class="op">=</span> <span class="op">~</span><span class="va">caffeine</span> <span class="op">+</span> <span class="va">cost</span> <span class="op">+</span> <span class="va">size</span> <span class="op">+</span> <span class="va">type</span>, trials <span class="op">=</span> <span class="fl">36</span>,</span></span>
<span class="r-in"><span>                              splitplotdesign <span class="op">=</span> <span class="va">coffeeblockdesign</span>, blocksizes <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Evaluating design (blocking is automatically detected)</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">coffeefinaldesign</span>, <span class="fl">0.2</span>, blocking <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.9439701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     caffeine    effect.power 0.9434218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         cost    effect.power 0.9999919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         size    effect.power 0.9988575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         type    effect.power 0.9997703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  (Intercept) parameter.power 0.9439701</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     caffeine parameter.power 0.9434218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         cost parameter.power 0.9999919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        size1 parameter.power 0.9978819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       size2 parameter.power 0.9978819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type1 parameter.power 0.9746858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       type2 parameter.power 0.9746858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       type3 parameter.power 0.9744501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.2 <span style="font-weight: bold;">• Trials = </span>36 <span style="font-weight: bold;">• Blocked = </span>TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~caffeine + cost + size + type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, 1, -1, 1, -1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Number of Blocks = </span>Level 1: 12 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Variance Ratios  = </span>Level 1: 1, Level 2: 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lme4::lmer(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Manually turn blocking off to see completely randomized design power</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">coffeefinaldesign</span>, <span class="fl">0.2</span>, blocking <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.9999981</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     caffeine    effect.power 0.9999978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         cost    effect.power 0.9999978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         size    effect.power 0.9991258</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         type    effect.power 0.9999460</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  (Intercept) parameter.power 0.9999981</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     caffeine parameter.power 0.9999978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         cost parameter.power 0.9999978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        size1 parameter.power 0.9981168</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       size2 parameter.power 0.9981168</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type1 parameter.power 0.9828414</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       type2 parameter.power 0.9828414</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       type3 parameter.power 0.9828414</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.2 <span style="font-weight: bold;">• Trials = </span>36 <span style="font-weight: bold;">• Blocked = </span>FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~caffeine + cost + size + type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, 1, -1, 1, -1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lm(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#We can also evaluate the design with a custom ratio between the whole plot error to</span></span></span>
<span class="r-in"><span><span class="co">#the run-to-run error.</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">coffeefinaldesign</span>, <span class="fl">0.2</span>, varianceratios <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  (Intercept)    effect.power 0.8134670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     caffeine    effect.power 0.8128997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         cost    effect.power 0.9999905</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         size    effect.power 0.9988575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         type    effect.power 0.9997387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  (Intercept) parameter.power 0.8134670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     caffeine parameter.power 0.8128997</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         cost parameter.power 0.9999905</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        size1 parameter.power 0.9978819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       size2 parameter.power 0.9978819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       type1 parameter.power 0.9734835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       type2 parameter.power 0.9734835</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       type3 parameter.power 0.9732389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info=============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.2 <span style="font-weight: bold;">• Trials = </span>36 <span style="font-weight: bold;">• Blocked = </span>TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~caffeine + cost + size + type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1, 1, 1, -1, 1, -1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Number of Blocks = </span>Level 1: 12 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Variance Ratios  = </span>Level 1: 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lme4::lmer(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#If the design was generated outside of skpr and thus the row names do not have the</span></span></span>
<span class="r-in"><span><span class="co">#blocking structure encoded already, the user can add these manually. For a 12-run</span></span></span>
<span class="r-in"><span><span class="co">#design with 4 blocks, here is a vector indicated the blocks:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">blockcolumn</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#If we wanted to add this blocking structure to the design coffeeblockdesign, we would</span></span></span>
<span class="r-in"><span><span class="co">#add a column with the format "Block1", "Block2", "Block3" ... and each one will be treated</span></span></span>
<span class="r-in"><span><span class="co">#as a separate blocking layer.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">coffeeblockdesign</span><span class="op">$</span><span class="va">Block1</span> <span class="op">=</span> <span class="va">blockcolumn</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#By default, skpr will throw out the blocking columns unless the user specifies `blocking = TRUE`.</span></span></span>
<span class="r-in"><span><span class="fu">eval_design</span><span class="op">(</span><span class="va">coffeeblockdesign</span>, blocking<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     parameter            type     power</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 (Intercept)    effect.power 0.1792554</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    caffeine    effect.power 0.1792554</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 (Intercept) parameter.power 0.1792554</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    caffeine parameter.power 0.1792554</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ============Evaluation Info============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Alpha = </span>0.05 <span style="font-weight: bold;">• Trials = </span>12 <span style="font-weight: bold;">• Blocked = </span>TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Evaluating Model = </span>~caffeine </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Anticipated Coefficients = </span>c(1, 1) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Number of Blocks = </span>Level 1: 4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Variance Ratios  = </span>Level 1: 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Contrasts = </span>`contr.sum` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Parameter Analysis Method = </span>`lme4::lmer(...)` </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">• Effect Analysis Method = </span>`car::Anova(fit, type = "III")` </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Tyler Morgan-Wall, George Khoury.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

